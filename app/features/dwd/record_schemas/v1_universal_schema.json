{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ClimaStation Universal Record Format V1",
  "type": "object",
  "required": [
    "station",
    "dataset",
    "timestamp",
    "parameters"
  ],
  "properties": {
    "station": {
      "type": "object",
      "required": [
        "station_id",
        "station_name"
      ],
      "properties": {
        "station_id": {
          "type": "string"
        },
        "station_name": {
          "type": "string"
        },
        "station_operator": {
          "type": "string"
        }
      }
    },
    "dataset": {
      "type": "object",
      "required": [
        "name",
        "description"
      ],
      "properties": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "variant": {
          "type": "string"
        }
      }
    },
    "timestamp": {
      "type": "object",
      "required": [
        "value",
        "time_reference"
      ],
      "properties": {
        "value": {
          "type": "string",
          "format": "date-time"
        },
        "time_reference": {
          "type": "string",
          "enum": [
            "UTC",
            "MEZ",
            "MESZ",
            "CET",
            "CEST"
          ]
        },
        "utc_offset": {
          "type": "string",
          "pattern": "^[+-][0-9]{2}:[0-9]{2}$"
        }
      }
    },
    "parameters": {
      "type": "object",
      "additionalProperties": {
        "type": [
          "number",
          "null"
        ]
      }
    },
    "quality_flag": {
      "type": "integer"
    },
    "location": {
      "type": "object",
      "required": [
        "latitude",
        "longitude",
        "station_altitude_m",
        "country"
      ],
      "properties": {
        "latitude": {
          "type": "number"
        },
        "longitude": {
          "type": "number"
        },
        "station_altitude_m": {
          "type": "number"
        },
        "country": {
          "type": "string"
        },
        "state": {
          "type": "string"
        },
        "region": {
          "type": "string"
        }
      }
    },
    "sensor": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": {
        "type": [
          "object",
          "null"
        ],
        "properties": {
          "device_type": {
            "type": "string"
          },
          "sensor_height_above_ground_m": {
            "type": "number"
          },
          "measurement_method": {
            "type": "object",
            "properties": {
              "en": {
                "type": "string"
              },
              "de": {
                "type": "string"
              }
            },
            "required": [
              "en",
              "de"
            ]
          }
        },
        "required": [
          "device_type",
          "sensor_height_above_ground_m",
          "measurement_method"
        ]
      }
    },
    "metadata": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "unit": {
            "type": "string"
          },
          "parameter_description": {
            "type": "object",
            "properties": {
              "en": {
                "type": "string"
              },
              "de": {
                "type": "string"
              }
            },
            "required": [
              "en",
              "de"
            ]
          }
        },
        "required": [
          "unit",
          "parameter_description"
        ]
      }
    },
    "record_metadata": {
      "type": "object",
      "required": [
        "data_source",
        "time_note"
      ],
      "properties": {
        "data_source": {
          "type": "object",
          "properties": {
            "en": {
              "type": "string"
            },
            "de": {
              "type": "string"
            }
          },
          "required": [
            "en",
            "de"
          ]
        },
        "time_note": {
          "type": "string"
        }
      }
    },
    "source_reference": {
      "type": "object",
      "description": "Reference to the original files this record was derived from",
      "properties": {
        "data_zip": {
          "type": "string",
          "description": "ZIP archive containing the raw measurement data"
        },
        "metadata_zip": {
          "type": "string",
          "description": "ZIP archive containing parameter metadata (may be same as data_zip)"
        },
        "description_pdf": {
          "type": "string",
          "description": "Path to optional PDF description of the dataset"
        }
      },
      "additionalProperties": false
    }
  }
}